<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>Mainly</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <h1 class="title">
            <span>M</span>
            <span>a</span>
            <span>i</span>
            <span>n</span>
            <span>l</span>
            <span>y</span>
        </h1>

        <div class="button-box">
            <button type="button" class="btn" onclick="location.href='./sunsetSunrise.html'">일출 일몰</button>
            <button type="button" class="btn" onclick="location.href='./feelLuck.html'">I'm Feeling Lucky</button>
        </div>

        <script>
            var url = 'http://apis.data.go.kr/1360000/AsosDalyInfoService/getWthrDataList'; /* API 주소 */
            var queryParams = '?' + encodeURIComponent('serviceKey') + '=' + 'esnNCY8czIqg29%2B2DGWoL23j6S6lPeksAYkmAhGYNz5qO%2ByYA3del96AXGjWtfWbuoq9t0KWh9L8frX8CyumaQ%3D%3D'; /* 서비스 키 */
            queryParams += '&' + encodeURIComponent('pageNo') + '=' + encodeURIComponent('1'); /**/
            queryParams += '&' + encodeURIComponent('numOfRows') + '=' + encodeURIComponent('10'); /**/
            queryParams += '&' + encodeURIComponent('dataType') + '=' + encodeURIComponent('XML'); /**/
            queryParams += '&' + encodeURIComponent('dataCd') + '=' + encodeURIComponent('ASOS'); /**/
            queryParams += '&' + encodeURIComponent('dateCd') + '=' + encodeURIComponent('DAY'); /**/
            queryParams += '&' + encodeURIComponent('startDt') + '=' + encodeURIComponent('20100101'); /**/
            queryParams += '&' + encodeURIComponent('endDt') + '=' + encodeURIComponent('20100601'); /**/
            queryParams += '&' + encodeURIComponent('stnIds') + '=' + encodeURIComponent('108'); /**/
            
            fetch(url + queryParams)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP 오류! 상태: ${response.status}`);
                    }
                    return response.text(); // 또는 response.json()을 사용하면 됩니다. 데이터 형식에 따라 선택
                })
                .then(data => {
                    // 받은 데이터를 XML로 파싱
                    var parser = new DOMParser();
                    var xmlDoc = parser.parseFromString(data, "text/xml");
            
                    // XML에서 필요한 정보 추출
                    var items = xmlDoc.getElementsByTagName('item');
                    var weatherInfoHTML = '';
            
                    for (var i = 0; i < items.length; i++) {
                        var date = items[i].getElementsByTagName('tm').item(0).textContent;
                        var temperature = items[i].getElementsByTagName('ta').item(0).textContent;
            
                        weatherInfoHTML += `<p>Date: ${date}, Temperature: ${temperature}</p>`;
                    }
            
                    // HTML 페이지에 동적으로 추가
                    document.getElementById('weather-info').innerHTML = weatherInfoHTML;
                })
                .catch(error => {
                    console.error('Fetch 오류:', error);
                });
            </script>
        <!-- <div class="weather-box">
            <button id="weatherbtn" type="button">현재 날씨 불러오기!</button>
            <dl>
                <dt>기온</dt>
                <dd class="temper"></dd>
                <dt>위치</dt>
                <dd class="place"></dd>
                <dt>설명</dt>
                <dd class="describe"></dd>
            </dl>
            <script src="./weather.js"></script>
        </div> -->
    </body>
</html>